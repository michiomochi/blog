<!DOCTYPE html>
<html ng-app="michis-note">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Macにtmuxを導入する</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <script src="/js/jquery-2.0.3.min.js"></script>
    <script src="/js/angular.min.js"></script>
    <script src="/js/angular-resource.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/angular.michis-note.js"></script>
    <script src="/js/snsCtrl.js"></script>

    <link rel="stylesheet" href="/css/screen.css" media="screen, projection" />
    <link rel="stylesheet" href="/css/print.css" media="print" />
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="/css/syntax.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/ie.css"/>

</head>
<body>

<div id="site">
    <div class="header">
        <h1 class="title"><a href="/">michis-note</a></h1>
    </div>
    <div id="main">
        <h2>Macにtmuxを導入する</h2>
<p class="meta">29 Oct 2013</p>

<div class="post">
    <img src="/img/terminal.png" alt="Macにtmuxを導入する"/>
    <p>職場の先輩にtmuxをおすすめされたので導入してみました！<br>
これからはうっかりTerminalを閉じてしまって泣くことがなくなりそうです！</p>

<p>tmuxとは<br>
引用 : <a href="https://bytebucket.org/ns9tks/tmux-ja/wiki/tmux-ja.html">https://bytebucket.org/ns9tks/tmux-ja/wiki/tmux-ja.html</a></p>

<blockquote>
<p>tmux は端末を多重化し、 1 つのスクリーンから複数の端末を作成、アクセス、制御することを可能にします。 tmux をスクリーンからデタッチしバックグランドで動作させておいて、 その後再度アタッチすることができます。<br>
tmux は起動されると 1 つのウィンドウを持つ新しい セッションを作成しスクリーンに表示します。 スクリーンの一番下にあるステータスラインはカレントセッションの情報を表示し、 対話型コマンドの入力に使用されます。<br>
セッションとは tmux に管理される疑似端末の集合の 1 つです。 各セッションはリンクする 1 つ以上のウィンドウを持ちます。 ウィンドウはスクリーン全体を占有し、 各々が独立した疑似端末である複数の矩形ペインへ分割することができます (疑似端末の技術的な詳細は pty(4) マニュアルページドキュメント)。 tmux のインスタンスはいくつでも同じセッションに接続することができ、 ウィンドウはいくつでも同じセッションに作成しておくことができます。 全セッションが kill されたときに tmux は終了します。</p>
</blockquote>

<p>ようするに</p>

<ul>
<li>1つの画面でたくさんの環境を開いておける</li>
<li>Terminalを閉じてもまたtmuxを実行すれば閉じた時の状態で復元できる</li>
</ul>

<p>ということです。<br>
便利です。</p>

<p>では早速入れてみましょう。<br>
おなじみのHomebrewでさくっとインストールします。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">% brew install tmux
==&gt; Installing dependencies for tmux: pkg-config, libevent
==&gt; Installing tmux dependency: pkg-config
==&gt; Downloading http://pkgconfig.freedesktop.org/releases/pkg-config-0.28.tar.gz
######################################################################## 100.0%
==&gt; ./configure --prefix=/usr/local/Cellar/pkg-config/0.28 --disable-host-tool --with-internal-glib -
==&gt; make
==&gt; make check
==&gt; make install
  /usr/local/Cellar/pkg-config/0.28: 10 files, 604K, built in 64 seconds
==&gt; Installing tmux dependency: libevent
==&gt; Downloading https://github.com/downloads/libevent/libevent/libevent-2.0.21-stable.tar.gz
######################################################################## 100.0%
==&gt; ./configure --disable-debug-mode --prefix=/usr/local/Cellar/libevent/2.0.21
==&gt; make
==&gt; make install
  /usr/local/Cellar/libevent/2.0.21: 48 files, 1.8M, built in 30 seconds
==&gt; Installing tmux
==&gt; Downloading http://downloads.sourceforge.net/project/tmux/tmux/tmux-1.8/tmux-1.8.tar.gz
######################################################################## 100.0%
==&gt; Patching
patching file osdep-darwin.c
patching file utf8.c
==&gt; ./configure --prefix=/usr/local/Cellar/tmux/1.8 --sysconfdir=/usr/local/etc
==&gt; make install
==&gt; Caveats
Example configurations have been installed to:
  /usr/local/Cellar/tmux/1.8/share/tmux/examples

Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==&gt; Summary
  /usr/local/Cellar/tmux/1.8: 14 files, 624K, built in 94 seconds
</code></pre></div>
<p>これでtmuxとTerminal上で入力すればtmuxが立ち上がるようになります。<br>
tmux上での基本的な操作は下記を参照ください。<br>
bind-keyはデフォルトではC-b(Ctrl + b)になっています。</p>

<ul>
<li><code>bind-key d</code> : デタッチ(tmuxの終了)</li>
<li><code>bind-key c</code> : 新しいウィンドウを作る</li>
<li><code>bind-key n</code> : 次のウィンドウへ移動する</li>
<li><code>bind-key p</code> : 前のウィンドウへ移動する</li>
<li><code>bind-key 数字</code> : 指定したウィンドウへ移動する</li>
<li><code>bind-key w</code> : ウィンドウを一覧表示する</li>
<li><code>bind-key %</code> : 画面を縦に分割する</li>
<li><code>bind-key ”</code> : 画面を横に分割する</li>
<li><code>bind-key !</code> : 画面の分割を解除する</li>
<li><code>bind-key o</code> : 分割した画面間を移動する</li>
<li><code>bind-key ,</code> : windowに名前をつける</li>
<li><code>bind-key ?</code> : コマンド一覧を表示</li>
</ul>

<p>よく使うtmuxコマンドは下記です。</p>

<ul>
<li><code>% tmux ls</code> : セッション一覧を確認</li>
<li><code>% tmux a</code> : 最後に使用したセッションにアタッチ</li>
<li><code>% tmux a -t &quot;セッション名&quot;</code> : 指定したセッションにアタッチ</li>
<li><code>% tmux kill-session -t &quot;セッション名&quot;</code> : セッション終了</li>
</ul>

<p>ちなみに私の.tmux.confはこのようになっています。<br>
まだ導入したばかりであまりカスタマイズしていませんがご参考までに。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Prefix変更 C-b -&gt; C-t
set-option -g prefix C-t
bind-key C-t send-prefix
unbind-key C-b

# key bind (windowの移動)
# カーソルキーで移動
bind -n left previous-window
bind -n right next-window

# key bind (paneの移動)
# Shift + カーソルキーで移動
bind -n S-left select-pane -L
bind -n S-down select-pane -D
bind -n S-up select-pane -U
bind -n S-right select-pane -R

# 256色端末を使用する
set-option -g default-terminal &quot;screen-256color&quot;
# viのキーバインドを使用する
set-window-option -g mode-keys vi
</code></pre></div>

    <div class="post-pagination">
        <ul>
            
            <li>
                <a href="/php_logging_by_fluentd">前回の記事: PHPのログをfluentdにて収集</a>
            </li>
            

            
            <li>
                <a href="/enable_laravel_complement_in_ide">次回の記事: LaravelでIDE補完を有効にする</a>
            </li>
            
        </ul>
    </div>

    <div id="disqus_thread"></div>
</div>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'michis-note'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    <div id="side-bar">
        <ul>
            <li>
                <h3>facebookページ</h3>
                <div class="fb-like-box" data-href="https://www.facebook.com/michisnote" data-colorscheme="light" data-show-faces="true" data-header="false" data-stream="false" data-show-border="true"></div>
            </li>
        </ul>
    </div>
    <div id="footer">
        <div class="contact">
            <p>
                道川 雅嘉 - Masayoshi Michikawa<br />
                プログラミング大好き23歳<br />
            </p>
        </div>
        <div class="contact">
            <p>
                <a href="https://github.com/michiomochi">github</a><br />
                <a href="https://twitter.com/tech_omochi">twitter</a><br />
            </p>
        </div>
    </div>
</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</body>
</html>
